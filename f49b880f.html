<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>第10章-数据的在线分析 | 爱爬虫与大数据 | 张凯恒的个人博客</title><meta name="keywords" content="《数据可视化》——基于Python的应用"><meta name="author" content="Kit,2514154656@qq.com"><meta name="copyright" content="Kit"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第10章 数据在线分析及可视化10.1 Tushare数据的可视化分析10.1.1 股市基本数据的获取与分析1#!pip install tushare --upgrade  1#import tushare as ts    #调用 tushare 包 10.1.1.1 上市公司的基本信息 123#s_b&#x3D;ts.get_stock_basics()#s_b&#x3D;ts.get_stock_basics"><meta property="og:type" content="article"><meta property="og:title" content="第10章-数据的在线分析"><meta property="og:url" content="https://zhangkh.top/f49b880f.html"><meta property="og:site_name" content="爱爬虫与大数据 | 张凯恒的个人博客"><meta property="og:description" content="第10章 数据在线分析及可视化10.1 Tushare数据的可视化分析10.1.1 股市基本数据的获取与分析1#!pip install tushare --upgrade  1#import tushare as ts    #调用 tushare 包 10.1.1.1 上市公司的基本信息 123#s_b&#x3D;ts.get_stock_basics()#s_b&#x3D;ts.get_stock_basics"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png"><meta property="article:published_time" content="2021-12-07T08:20:11.000Z"><meta property="article:modified_time" content="2021-12-07T09:05:29.919Z"><meta property="article:author" content="Kit"><meta property="article:tag" content="《数据可视化》——基于Python的应用"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png"><link rel="shortcut icon" href="/image/favicon.png"><link rel="canonical" href="https://zhangkh.top/f49b880f"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/image/pwaicons/manifest.json"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/image/pwaicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/image/pwaicons/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/image/pwaicons/16.png"><link rel="mask-icon" href="/image/pwaicons/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?49ea0cccf823d8608c6f8a12b538e5c3";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: Kit",link:"链接: ",source:"来源: 爱爬虫与大数据 | 张凯恒的个人博客",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#2d3035",position:"bottom-left"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"第10章-数据的在线分析",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-12-07 17:05:29"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const n=saveToLocal.get("global-font-size");void 0!==n&&document.documentElement.style.setProperty("--global-font-size",n+"px");const a=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};a(),document.addEventListener("pjax:complete",a)})(window)</script><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="//at.alicdn.com/t/font_2296420_0542xp5i00pe.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="爱爬虫与大数据 | 张凯恒的个人博客" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/image/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">53</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/f58e0e38.html"><i class="fa-fw fas fa-folder-open"></i> <span>资源分享</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i> <span>清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E9%9F%B3%E4%B9%90"><i class="fa-fw /music/"></i> <span>0</span></a></li><li><a class="site-page child" href="/%E7%85%A7%E7%89%87"><i class="fa-fw /Gallery/"></i> <span>1</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">爱爬虫与大数据 | 张凯恒的个人博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/f58e0e38.html"><i class="fa-fw fas fa-folder-open"></i> <span>资源分享</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i> <span>清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E9%9F%B3%E4%B9%90"><i class="fa-fw /music/"></i> <span>0</span></a></li><li><a class="site-page child" href="/%E7%85%A7%E7%89%87"><i class="fa-fw /Gallery/"></i> <span>1</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">第10章-数据的在线分析</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-07T08:20:11.000Z" title="发表于 2021-12-07 16:20:11">2021-12-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-07T09:05:29.919Z" title="更新于 2021-12-07 17:05:29">2021-12-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E3%80%8A%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E3%80%8B%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8EPython%E7%9A%84%E5%BA%94%E7%94%A8/">《数据可视化》——基于Python的应用</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>49分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="第10章-数据的在线分析"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第10章-数据在线分析及可视化"><a href="#第10章-数据在线分析及可视化" class="headerlink" title="第10章 数据在线分析及可视化"></a>第10章 数据在线分析及可视化</h1><h2 id="10-1-Tushare数据的可视化分析"><a href="#10-1-Tushare数据的可视化分析" class="headerlink" title="10.1 Tushare数据的可视化分析"></a>10.1 Tushare数据的可视化分析</h2><h3 id="10-1-1-股市基本数据的获取与分析"><a href="#10-1-1-股市基本数据的获取与分析" class="headerlink" title="10.1.1 股市基本数据的获取与分析"></a>10.1.1 股市基本数据的获取与分析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!pip install tushare --upgrade</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#import tushare as ts    #调用 tushare 包</span></span><br></pre></td></tr></table></figure><p>10.1.1.1 上市公司的基本信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#s_b=ts.get_stock_basics()</span></span><br><span class="line"><span class="comment">#s_b=ts.get_stock_basics(); #在线获取股票信息，每次读取数据可能不一样</span></span><br><span class="line"><span class="comment">#s_b.info(); #sb</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd        <span class="comment">#读取已保存的本地股票信息</span></span><br><span class="line">s_b=pd.read_excel(<span class="string">&#x27;./data/tushare.xlsx&#x27;</span>,<span class="string">&#x27;stock_basics&#x27;</span>,index_col=<span class="number">0</span>); </span><br><span class="line">s_b.info()</span><br></pre></td></tr></table></figure><pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 3951 entries, 688586 to 688519
Data columns (total 22 columns):
 #   Column            Non-Null Count  Dtype  
---  ------            --------------  -----  
 0   name              3951 non-null   object 
 1   industry          3947 non-null   object 
 2   area              3947 non-null   object 
 3   pe                3951 non-null   float64
 4   outstanding       3951 non-null   float64
 5   totals            3951 non-null   float64
 6   totalAssets       3951 non-null   float64
 7   liquidAssets      3951 non-null   float64
 8   fixedAssets       3951 non-null   float64
 9   reserved          3951 non-null   float64
 10  reservedPerShare  3951 non-null   float64
 11  esp               3951 non-null   float64
 12  bvps              3951 non-null   float64
 13  pb                3951 non-null   float64
 14  timeToMarket      3951 non-null   int64  
 15  undp              3951 non-null   float64
 16  perundp           3951 non-null   float64
 17  rev               3951 non-null   float64
 18  profit            3951 non-null   float64
 19  gpr               3951 non-null   float64
 20  npr               3951 non-null   float64
 21  holders           3951 non-null   int64  
dtypes: float64(17), int64(2), object(3)
memory usage: 709.9+ KB</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s_b<span class="comment">#.iloc[:6,:9]  #显示前6行7列数据</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>name</th><th>industry</th><th>area</th><th>pe</th><th>outstanding</th><th>totals</th><th>totalAssets</th><th>liquidAssets</th><th>fixedAssets</th><th>reserved</th><th>...</th><th>bvps</th><th>pb</th><th>timeToMarket</th><th>undp</th><th>perundp</th><th>rev</th><th>profit</th><th>gpr</th><th>npr</th><th>holders</th></tr><tr><th>code</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>688586</th><td>N江航</td><td>航空</td><td>安徽</td><td>77.57</td><td>0.88</td><td>4.04</td><td>18.43</td><td>11.58</td><td>5.23</td><td>3.91</td><td>...</td><td>4.59</td><td>8.80</td><td>20200731</td><td>1.83</td><td>0.45</td><td>0.00</td><td>0.00</td><td>46.08</td><td>29.69</td><td>59169</td></tr><tr><th>688311</th><td>N盟升</td><td>元器件</td><td>四川</td><td>238.24</td><td>0.26</td><td>1.15</td><td>8.70</td><td>5.51</td><td>0.56</td><td>3.20</td><td>...</td><td>14.02</td><td>9.75</td><td>20200731</td><td>1.39</td><td>1.21</td><td>0.00</td><td>0.00</td><td>72.47</td><td>27.74</td><td>26472</td></tr><tr><th>605222</th><td>N起帆</td><td>电气设备</td><td>上海</td><td>35.53</td><td>0.50</td><td>4.01</td><td>47.26</td><td>39.48</td><td>5.80</td><td>2.81</td><td>...</td><td>6.38</td><td>4.16</td><td>20200731</td><td>9.74</td><td>2.43</td><td>0.00</td><td>0.00</td><td>10.08</td><td>4.23</td><td>52755</td></tr><tr><th>601456</th><td>N国联</td><td>证券</td><td>江苏</td><td>15.87</td><td>4.76</td><td>23.78</td><td>374.70</td><td>0.00</td><td>0.00</td><td>0.00</td><td>...</td><td>4.30</td><td>1.42</td><td>20200731</td><td>0.00</td><td>0.00</td><td>0.00</td><td>0.00</td><td>0.00</td><td>46.32</td><td>416247</td></tr><tr><th>2991</th><td>N甘源</td><td>食品</td><td>江西</td><td>35.54</td><td>0.23</td><td>0.93</td><td>8.18</td><td>3.82</td><td>2.75</td><td>1.45</td><td>...</td><td>14.78</td><td>3.78</td><td>20200731</td><td>2.84</td><td>3.05</td><td>0.00</td><td>0.00</td><td>39.32</td><td>15.04</td><td>49829</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>688335</th><td>复洁环保</td><td>环境保护</td><td>上海</td><td>0.00</td><td>0.00</td><td>0.00</td><td>4.05</td><td>3.71</td><td>0.10</td><td>0.83</td><td>...</td><td>0.00</td><td>0.00</td><td>0</td><td>1.04</td><td>0.00</td><td>0.00</td><td>0.00</td><td>34.42</td><td>6.97</td><td>0</td></tr><tr><th>688338</th><td>赛科希德</td><td>生物制药</td><td>北京</td><td>0.00</td><td>0.00</td><td>0.00</td><td>4.27</td><td>3.82</td><td>0.39</td><td>1.32</td><td>...</td><td>0.00</td><td>0.00</td><td>0</td><td>1.62</td><td>0.00</td><td>14.73</td><td>25.26</td><td>59.41</td><td>30.95</td><td>0</td></tr><tr><th>688339</th><td>亿华通</td><td>电气设备</td><td>北京</td><td>0.00</td><td>0.00</td><td>0.00</td><td>16.83</td><td>11.81</td><td>1.81</td><td>8.85</td><td>...</td><td>0.00</td><td>0.00</td><td>0</td><td>1.09</td><td>0.00</td><td>50.25</td><td>176.50</td><td>45.12</td><td>11.55</td><td>0</td></tr><tr><th>688379</th><td>华光新材</td><td>小金属</td><td>浙江</td><td>0.00</td><td>0.00</td><td>0.00</td><td>7.29</td><td>5.24</td><td>1.52</td><td>1.08</td><td>...</td><td>0.00</td><td>0.00</td><td>0</td><td>3.07</td><td>0.00</td><td>0.00</td><td>0.00</td><td>15.68</td><td>5.17</td><td>0</td></tr><tr><th>688519</th><td>南亚新材</td><td>元器件</td><td>上海</td><td>0.00</td><td>0.00</td><td>0.00</td><td>19.09</td><td>13.46</td><td>4.63</td><td>2.00</td><td>...</td><td>0.00</td><td>0.00</td><td>0</td><td>2.96</td><td>0.00</td><td>0.00</td><td>0.00</td><td>15.99</td><td>7.28</td><td>0</td></tr></tbody></table><p>3951 rows × 22 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#s_b.to_csv(&#x27;stock_basics.csv&#x27;)                   #保存数据到csv表格中</span></span><br><span class="line"><span class="comment">#s_b=pd.read_csv(&#x27;stock_basics.csv&#x27;,index_col=0) #从csv文档中读取数据</span></span><br></pre></td></tr></table></figure><p>10.1.1.2 股市基本数据的分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s_b_c=s_b.industry.value_counts(); s_b_c</span><br></pre></td></tr></table></figure><pre><code>软件服务    215
元器件     196
电气设备    186
化工原料    175
专用机械    151
       ... 
铁路        5
林业        4
机场        4
商品城       3
电器连锁      2
Name: industry, Length: 110, dtype: int64</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame <span class="keyword">as</span> DF  <span class="comment">#设置结果以数据框形式输出</span></span><br><span class="line">DF(s_b_c)   <span class="comment">#pd.DataFrame(s_b_c)  </span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>industry</th></tr></thead><tbody><tr><th>软件服务</th><td>215</td></tr><tr><th>元器件</th><td>196</td></tr><tr><th>电气设备</th><td>186</td></tr><tr><th>化工原料</th><td>175</td></tr><tr><th>专用机械</th><td>151</td></tr><tr><th>...</th><td>...</td></tr><tr><th>铁路</th><td>5</td></tr><tr><th>林业</th><td>4</td></tr><tr><th>机场</th><td>4</td></tr><tr><th>商品城</th><td>3</td></tr><tr><th>电器连锁</th><td>2</td></tr></tbody></table><p>110 rows × 1 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%config InlineBackend.figure_format=<span class="string">&#x27;retina&#x27;</span> <span class="comment">#提高图形显示的清晰度</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt            </span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>];  <span class="comment">#中文字为黑体</span></span><br><span class="line">s_b_c[:<span class="number">10</span>].plot(kind=<span class="string">&#x27;barh&#x27;</span>);                <span class="comment">#前10个行业水平条图</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071621461.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#按行业(industry)计算平均收益率(esp)并排序</span></span><br><span class="line">i_e=s_b.groupby([<span class="string">&#x27;industry&#x27;</span>])[<span class="string">&#x27;esp&#x27;</span>].mean().sort_values();</span><br><span class="line">DF(i_e)</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>esp</th></tr><tr><th>industry</th><th></th></tr></thead><tbody><tr><th>空运</th><td>-0.243875</td></tr><tr><th>旅游服务</th><td>-0.129538</td></tr><tr><th>公路</th><td>-0.111286</td></tr><tr><th>旅游景点</th><td>-0.101167</td></tr><tr><th>酒店餐饮</th><td>-0.090100</td></tr><tr><th>...</th><td>...</td></tr><tr><th>饲料</th><td>0.249765</td></tr><tr><th>银行</th><td>0.324250</td></tr><tr><th>船舶</th><td>0.331857</td></tr><tr><th>保险</th><td>0.695143</td></tr><tr><th>白酒</th><td>1.517105</td></tr></tbody></table><p>110 rows × 1 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DF(i_e.head(<span class="number">10</span>))  <span class="comment">#收益率最差的10个行业</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>esp</th></tr><tr><th>industry</th><th></th></tr></thead><tbody><tr><th>空运</th><td>-0.243875</td></tr><tr><th>旅游服务</th><td>-0.129538</td></tr><tr><th>公路</th><td>-0.111286</td></tr><tr><th>旅游景点</th><td>-0.101167</td></tr><tr><th>酒店餐饮</th><td>-0.090100</td></tr><tr><th>石油加工</th><td>-0.085556</td></tr><tr><th>公共交通</th><td>-0.060375</td></tr><tr><th>林业</th><td>-0.045250</td></tr><tr><th>路桥</th><td>-0.039789</td></tr><tr><th>汽车整车</th><td>-0.025348</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span>;          <span class="comment">#正常显示图中负号</span></span><br><span class="line">i_e.head(<span class="number">10</span>).plot(kind=<span class="string">&#x27;bar&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071621458.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DF(i_e.tail(<span class="number">10</span>))   <span class="comment">#收益率最好的10个行业</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>esp</th></tr><tr><th>industry</th><th></th></tr></thead><tbody><tr><th>农药化肥</th><td>0.151171</td></tr><tr><th>园区开发</th><td>0.153625</td></tr><tr><th>食品</th><td>0.154523</td></tr><tr><th>医药商业</th><td>0.195538</td></tr><tr><th>农业综合</th><td>0.230633</td></tr><tr><th>饲料</th><td>0.249765</td></tr><tr><th>银行</th><td>0.324250</td></tr><tr><th>船舶</th><td>0.331857</td></tr><tr><th>保险</th><td>0.695143</td></tr><tr><th>白酒</th><td>1.517105</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i_e.tail(<span class="number">10</span>).plot(kind=<span class="string">&#x27;barh&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071621519.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#按地区(area)和行业(industry)计算平均收益率(esp)并排序</span></span><br><span class="line">a_i_e=s_b.groupby([<span class="string">&#x27;area&#x27;</span>,<span class="string">&#x27;industry&#x27;</span>])[<span class="string">&#x27;esp&#x27;</span>].mean().sort_values();</span><br><span class="line">DF(a_i_e)  </span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th></th><th>esp</th></tr><tr><th>area</th><th>industry</th><th></th></tr></thead><tbody><tr><th>江西</th><th>公共交通</th><td>-0.6700</td></tr><tr><th>新疆</th><th>服饰</th><td>-0.6300</td></tr><tr><th>湖北</th><th>旅游服务</th><td>-0.5660</td></tr><tr><th>辽宁</th><th>石油加工</th><td>-0.5550</td></tr><tr><th>湖南</th><th>小金属</th><td>-0.5270</td></tr><tr><th>...</th><th>...</th><td>...</td></tr><tr><th>山西</th><th>白酒</th><td>1.4100</td></tr><tr><th>深圳</th><th>保险</th><td>1.4700</td></tr><tr><th>江苏</th><th>白酒</th><td>1.5595</td></tr><tr><th>北京</th><th>家用电器</th><td>2.2600</td></tr><tr><th>贵州</th><th>白酒</th><td>17.9920</td></tr></tbody></table><p>1359 rows × 1 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GD_e1=DF(a_i_e[<span class="string">&#x27;广东&#x27;</span>].head(<span class="number">10</span>)); GD_e1  <span class="comment">#广东省收益率最差的10个行业</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>esp</th></tr><tr><th>industry</th><th></th></tr></thead><tbody><tr><th>空运</th><td>-0.430000</td></tr><tr><th>家居用品</th><td>-0.145222</td></tr><tr><th>装修装饰</th><td>-0.109000</td></tr><tr><th>百货</th><td>-0.105000</td></tr><tr><th>酒店餐饮</th><td>-0.092000</td></tr><tr><th>玻璃</th><td>-0.087000</td></tr><tr><th>化纤</th><td>-0.082000</td></tr><tr><th>综合类</th><td>-0.067667</td></tr><tr><th>建筑工程</th><td>-0.065250</td></tr><tr><th>石油加工</th><td>-0.061000</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GD_e2=DF(a_i_e[<span class="string">&#x27;广东&#x27;</span>].tail(<span class="number">10</span>)); GD_e2 <span class="comment">#广东省收益率最好的10个行业</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>esp</th></tr><tr><th>industry</th><th></th></tr></thead><tbody><tr><th>农业综合</th><td>0.17450</td></tr><tr><th>火力发电</th><td>0.17575</td></tr><tr><th>化学制药</th><td>0.18720</td></tr><tr><th>水泥</th><td>0.27100</td></tr><tr><th>电信运营</th><td>0.32100</td></tr><tr><th>乳制品</th><td>0.38200</td></tr><tr><th>医药商业</th><td>0.42700</td></tr><tr><th>多元金融</th><td>0.64650</td></tr><tr><th>饲料</th><td>0.69900</td></tr><tr><th>船舶</th><td>1.13850</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GD_e12=pd.concat([GD_e1,GD_e2]); GD_e12  <span class="comment">#广东省收益率最差和最好的10个行业合并</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>esp</th></tr><tr><th>industry</th><th></th></tr></thead><tbody><tr><th>空运</th><td>-0.430000</td></tr><tr><th>家居用品</th><td>-0.145222</td></tr><tr><th>装修装饰</th><td>-0.109000</td></tr><tr><th>百货</th><td>-0.105000</td></tr><tr><th>酒店餐饮</th><td>-0.092000</td></tr><tr><th>玻璃</th><td>-0.087000</td></tr><tr><th>化纤</th><td>-0.082000</td></tr><tr><th>综合类</th><td>-0.067667</td></tr><tr><th>建筑工程</th><td>-0.065250</td></tr><tr><th>石油加工</th><td>-0.061000</td></tr><tr><th>农业综合</th><td>0.174500</td></tr><tr><th>火力发电</th><td>0.175750</td></tr><tr><th>化学制药</th><td>0.187200</td></tr><tr><th>水泥</th><td>0.271000</td></tr><tr><th>电信运营</th><td>0.321000</td></tr><tr><th>乳制品</th><td>0.382000</td></tr><tr><th>医药商业</th><td>0.427000</td></tr><tr><th>多元金融</th><td>0.646500</td></tr><tr><th>饲料</th><td>0.699000</td></tr><tr><th>船舶</th><td>1.138500</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GD_e12.plot(kind=<span class="string">&#x27;bar&#x27;</span>).axhline(y=<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620620.png" alt="png"></p><p>10.1.1.3 新股发行数据的分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#n_s=ts.new_stocks(); n_s.info()</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n_s=pd.read_excel(<span class="string">&#x27;./data/tushare.xlsx&#x27;</span>,<span class="string">&#x27;new_stocks&#x27;</span>,index_col=<span class="number">0</span>); n_s.info()</span><br></pre></td></tr></table></figure><pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 450 entries, 0 to 449
Data columns (total 12 columns):
 #   Column      Non-Null Count  Dtype  
---  ------      --------------  -----  
 0   code        450 non-null    int64  
 1   xcode       450 non-null    int64  
 2   name        450 non-null    object 
 3   ipo_date    450 non-null    object 
 4   issue_date  407 non-null    object 
 5   amount      450 non-null    int64  
 6   markets     450 non-null    int64  
 7   price       450 non-null    float64
 8   pe          450 non-null    float64
 9   limit       450 non-null    float64
 10  funds       450 non-null    float64
 11  ballot      450 non-null    float64
dtypes: float64(5), int64(4), object(3)
memory usage: 45.7+ KB</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n_s<span class="comment">#.iloc[:6,:7]  #显示前6行7列数据</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>code</th><th>xcode</th><th>name</th><th>ipo_date</th><th>issue_date</th><th>amount</th><th>markets</th><th>price</th><th>pe</th><th>limit</th><th>funds</th><th>ballot</th></tr></thead><tbody><tr><th>0</th><td>605008</td><td>707008</td><td>长鸿高科</td><td>2020-08-12</td><td>NaN</td><td>4600</td><td>1380</td><td>0.00</td><td>0.00</td><td>1.30</td><td>4.848</td><td>0.00</td></tr><tr><th>1</th><td>300872</td><td>300872</td><td>天阳科技</td><td>2020-08-12</td><td>NaN</td><td>5620</td><td>1602</td><td>0.00</td><td>0.00</td><td>1.60</td><td>6.656</td><td>0.00</td></tr><tr><th>2</th><td>300873</td><td>300873</td><td>海晨股份</td><td>2020-08-12</td><td>NaN</td><td>3333</td><td>950</td><td>0.00</td><td>0.00</td><td>0.95</td><td>7.301</td><td>0.00</td></tr><tr><th>3</th><td>300876</td><td>300876</td><td>蒙泰高新</td><td>2020-08-12</td><td>NaN</td><td>2400</td><td>684</td><td>0.00</td><td>0.00</td><td>0.65</td><td>4.353</td><td>0.00</td></tr><tr><th>4</th><td>300871</td><td>300871</td><td>回盛生物</td><td>2020-08-11</td><td>NaN</td><td>2770</td><td>789</td><td>0.00</td><td>0.00</td><td>0.75</td><td>6.548</td><td>0.00</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>445</th><td>2935</td><td>2935</td><td>天奥电子</td><td>2018-08-23</td><td>2018-09-03</td><td>2667</td><td>2400</td><td>19.38</td><td>22.99</td><td>0.80</td><td>5.169</td><td>0.03</td></tr><tr><th>446</th><td>601068</td><td>780068</td><td>中铝国际</td><td>2018-08-21</td><td>2018-08-31</td><td>29591</td><td>26632</td><td>3.45</td><td>31.86</td><td>8.80</td><td>10.209</td><td>0.15</td></tr><tr><th>447</th><td>603192</td><td>732192</td><td>汇得科技</td><td>2018-08-16</td><td>2018-08-28</td><td>2667</td><td>2400</td><td>19.60</td><td>22.99</td><td>1.00</td><td>5.227</td><td>0.03</td></tr><tr><th>448</th><td>2933</td><td>2933</td><td>新兴装备</td><td>2018-08-15</td><td>2018-08-28</td><td>2935</td><td>2642</td><td>22.45</td><td>22.99</td><td>1.15</td><td>6.589</td><td>0.03</td></tr><tr><th>449</th><td>603590</td><td>732590</td><td>康辰药业</td><td>2018-08-14</td><td>2018-08-27</td><td>4000</td><td>3600</td><td>24.34</td><td>22.99</td><td>1.60</td><td>9.736</td><td>0.04</td></tr></tbody></table><p>450 rows × 12 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#n_s.to_csv(&#x27;new_stocks.csv&#x27;)                     #保存数据到csv表格中</span></span><br><span class="line"><span class="comment">#n_s=pd.read_csv(&#x27;new_stocks.csv&#x27;,index_col=0)   #从csv文件中读取数据</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n_s20=n_s.loc[n_s.ipo_date&gt;=<span class="string">&#x27;2020-01-01&#x27;</span>,]; n_s20.iloc[:,:<span class="number">7</span>]  <span class="comment">#2020年发行的新股</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>code</th><th>xcode</th><th>name</th><th>ipo_date</th><th>issue_date</th><th>amount</th><th>markets</th></tr></thead><tbody><tr><th>0</th><td>605008</td><td>707008</td><td>长鸿高科</td><td>2020-08-12</td><td>NaN</td><td>4600</td><td>1380</td></tr><tr><th>1</th><td>300872</td><td>300872</td><td>天阳科技</td><td>2020-08-12</td><td>NaN</td><td>5620</td><td>1602</td></tr><tr><th>2</th><td>300873</td><td>300873</td><td>海晨股份</td><td>2020-08-12</td><td>NaN</td><td>3333</td><td>950</td></tr><tr><th>3</th><td>300876</td><td>300876</td><td>蒙泰高新</td><td>2020-08-12</td><td>NaN</td><td>2400</td><td>684</td></tr><tr><th>4</th><td>300871</td><td>300871</td><td>回盛生物</td><td>2020-08-11</td><td>NaN</td><td>2770</td><td>789</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>207</th><td>601816</td><td>780816</td><td>京沪高铁</td><td>2020-01-06</td><td>2020-01-16</td><td>628563</td><td>234379</td></tr><tr><th>208</th><td>300813</td><td>300813</td><td>泰林生物</td><td>2020-01-03</td><td>2020-01-14</td><td>1300</td><td>1300</td></tr><tr><th>209</th><td>2971</td><td>2971</td><td>和远气体</td><td>2020-01-02</td><td>2020-01-13</td><td>4000</td><td>3600</td></tr><tr><th>210</th><td>688178</td><td>787178</td><td>万德斯</td><td>2020-01-02</td><td>2020-01-14</td><td>2125</td><td>808</td></tr><tr><th>211</th><td>603551</td><td>732551</td><td>奥普家居</td><td>2020-01-02</td><td>2020-01-15</td><td>4001</td><td>3601</td></tr></tbody></table><p>212 rows × 7 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2020年发行量最大的10支新股</span></span><br><span class="line">n_s20.sort_values(by=<span class="string">&#x27;amount&#x27;</span>,ascending=<span class="literal">False</span>).iloc[:<span class="number">10</span>,:<span class="number">7</span>]</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>code</th><th>xcode</th><th>name</th><th>ipo_date</th><th>issue_date</th><th>amount</th><th>markets</th></tr></thead><tbody><tr><th>207</th><td>601816</td><td>780816</td><td>京沪高铁</td><td>2020-01-06</td><td>2020-01-16</td><td>628563</td><td>234379</td></tr><tr><th>74</th><td>688981</td><td>787981</td><td>中芯国际</td><td>2020-07-07</td><td>2020-07-16</td><td>193846</td><td>25284</td></tr><tr><th>121</th><td>600918</td><td>730918</td><td>中泰证券</td><td>2020-05-20</td><td>2020-06-03</td><td>69686</td><td>62718</td></tr><tr><th>152</th><td>688126</td><td>787126</td><td>沪硅产业</td><td>2020-04-09</td><td>2020-04-20</td><td>62007</td><td>13457</td></tr><tr><th>134</th><td>601778</td><td>780778</td><td>晶科科技</td><td>2020-05-06</td><td>2020-05-19</td><td>59459</td><td>53513</td></tr><tr><th>52</th><td>601456</td><td>780456</td><td>国联证券</td><td>2020-07-21</td><td>2020-07-31</td><td>47572</td><td>42815</td></tr><tr><th>120</th><td>601827</td><td>780827</td><td>三峰环境</td><td>2020-05-21</td><td>2020-06-05</td><td>37827</td><td>34044</td></tr><tr><th>181</th><td>688396</td><td>787396</td><td>华润微</td><td>2020-02-12</td><td>2020-02-27</td><td>33694</td><td>6153</td></tr><tr><th>21</th><td>688055</td><td>787055</td><td>龙腾光电</td><td>2020-08-06</td><td>NaN</td><td>33333</td><td>5667</td></tr><tr><th>113</th><td>688599</td><td>787599</td><td>天合光能</td><td>2020-05-29</td><td>2020-06-10</td><td>31020</td><td>8903</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2020年中签率最高的10支新股</span></span><br><span class="line">n_s20.sort_values(by=<span class="string">&#x27;ballot&#x27;</span>).iloc[-<span class="number">10</span>:,[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">11</span>]] </span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>code</th><th>xcode</th><th>name</th><th>ipo_date</th><th>issue_date</th><th>amount</th><th>ballot</th></tr></thead><tbody><tr><th>152</th><td>688126</td><td>787126</td><td>沪硅产业</td><td>2020-04-09</td><td>2020-04-20</td><td>62007</td><td>0.10</td></tr><tr><th>174</th><td>300821</td><td>300821</td><td>东岳硅材</td><td>2020-03-03</td><td>2020-03-12</td><td>30000</td><td>0.11</td></tr><tr><th>150</th><td>601609</td><td>780609</td><td>金田铜业</td><td>2020-04-10</td><td>2020-04-22</td><td>24200</td><td>0.12</td></tr><tr><th>179</th><td>601696</td><td>780696</td><td>中银证券</td><td>2020-02-13</td><td>2020-02-26</td><td>27800</td><td>0.13</td></tr><tr><th>120</th><td>601827</td><td>780827</td><td>三峰环境</td><td>2020-05-21</td><td>2020-06-05</td><td>37827</td><td>0.15</td></tr><tr><th>52</th><td>601456</td><td>780456</td><td>国联证券</td><td>2020-07-21</td><td>2020-07-31</td><td>47572</td><td>0.15</td></tr><tr><th>74</th><td>688981</td><td>787981</td><td>中芯国际</td><td>2020-07-07</td><td>2020-07-16</td><td>193846</td><td>0.21</td></tr><tr><th>134</th><td>601778</td><td>780778</td><td>晶科科技</td><td>2020-05-06</td><td>2020-05-19</td><td>59459</td><td>0.22</td></tr><tr><th>121</th><td>600918</td><td>730918</td><td>中泰证券</td><td>2020-05-20</td><td>2020-06-03</td><td>69686</td><td>0.24</td></tr><tr><th>207</th><td>601816</td><td>780816</td><td>京沪高铁</td><td>2020-01-06</td><td>2020-01-16</td><td>628563</td><td>0.79</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(n_s20.amount, n_s20.ballot,<span class="string">&#x27;o&#x27;</span>); <span class="comment">#发行量和中签率之间的散点图 </span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620623.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n_s20.amount.corr(n_s20.ballot) <span class="comment">#发行量和中签率之间的相关系数</span></span><br></pre></td></tr></table></figure><pre><code>0.9320352728928714</code></pre><h3 id="10-1-2-证券交易数据的获取与分析"><a href="#10-1-2-证券交易数据的获取与分析" class="headerlink" title="10.1.2 证券交易数据的获取与分析"></a>10.1.2 证券交易数据的获取与分析</h3><p>10.1.2.1 历史行情数据分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h_s=pd.read_excel(<span class="string">&#x27;data/tushare.xlsx&#x27;</span>,<span class="string">&#x27;hist_data&#x27;</span>,index_col=<span class="number">0</span>); h_s.info()</span><br><span class="line"><span class="comment">#h_s=ts.get_hist_data(&#x27;hs300&#x27;); h_s.info()  #在线获取沪深300指数数据</span></span><br></pre></td></tr></table></figure><pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Index: 605 entries, 2020-08-04 to 2018-02-05
Data columns (total 13 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   open          605 non-null    float64
 1   high          605 non-null    float64
 2   close         605 non-null    float64
 3   low           605 non-null    float64
 4   volume        605 non-null    float64
 5   price_change  605 non-null    float64
 6   p_change      605 non-null    float64
 7   ma5           605 non-null    float64
 8   ma10          605 non-null    float64
 9   ma20          605 non-null    float64
 10  v_ma5         605 non-null    float64
 11  v_ma10        605 non-null    float64
 12  v_ma20        605 non-null    float64
dtypes: float64(13)
memory usage: 66.2+ KB</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h_s<span class="comment">#.iloc[:6,:7]   #显示前6行7列数据</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>open</th><th>high</th><th>close</th><th>low</th><th>volume</th><th>price_change</th><th>p_change</th><th>ma5</th><th>ma10</th><th>ma20</th><th>v_ma5</th><th>v_ma10</th><th>v_ma20</th></tr><tr><th>date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2020-08-04</th><td>4778.49</td><td>4807.08</td><td>4775.80</td><td>4747.77</td><td>2399749.75</td><td>4.49</td><td>0.09</td><td>4715.464</td><td>4660.651</td><td>4690.541</td><td>1986506.22</td><td>2029861.14</td><td>2437863.12</td></tr><tr><th>2020-08-03</th><td>4735.90</td><td>4771.37</td><td>4771.31</td><td>4720.03</td><td>2147762.50</td><td>76.26</td><td>1.62</td><td>4673.956</td><td>4652.175</td><td>4686.658</td><td>1832093.27</td><td>1990301.82</td><td>2520879.91</td></tr><tr><th>2020-07-31</th><td>4652.18</td><td>4741.81</td><td>4695.05</td><td>4621.96</td><td>1848390.25</td><td>38.90</td><td>0.83</td><td>4625.384</td><td>4643.074</td><td>4681.597</td><td>1745381.87</td><td>2021594.50</td><td>2616402.29</td></tr><tr><th>2020-07-30</th><td>4689.76</td><td>4704.63</td><td>4656.15</td><td>4649.77</td><td>1669675.62</td><td>-22.86</td><td>-0.49</td><td>4587.492</td><td>4628.039</td><td>4667.824</td><td>1863514.22</td><td>2044131.04</td><td>2669225.56</td></tr><tr><th>2020-07-29</th><td>4559.16</td><td>4680.56</td><td>4679.01</td><td>4548.85</td><td>1866953.00</td><td>110.75</td><td>2.42</td><td>4598.750</td><td>4614.049</td><td>4651.809</td><td>1998208.25</td><td>2161820.60</td><td>2712211.46</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>2018-02-09</th><td>3896.17</td><td>3911.29</td><td>3840.65</td><td>3759.15</td><td>2063498.25</td><td>-171.40</td><td>-4.27</td><td>4065.248</td><td>4065.248</td><td>4065.248</td><td>1890011.10</td><td>1890011.10</td><td>1890011.10</td></tr><tr><th>2018-02-08</th><td>4022.88</td><td>4071.67</td><td>4012.05</td><td>3974.68</td><td>1592699.88</td><td>-38.45</td><td>-0.95</td><td>4121.398</td><td>4121.398</td><td>4121.398</td><td>1846639.32</td><td>1846639.32</td><td>1846639.32</td></tr><tr><th>2018-02-07</th><td>4205.74</td><td>4212.57</td><td>4050.50</td><td>4048.42</td><td>2031274.88</td><td>-98.39</td><td>-2.37</td><td>4157.847</td><td>4157.847</td><td>4157.847</td><td>1931285.79</td><td>1931285.79</td><td>1931285.79</td></tr><tr><th>2018-02-06</th><td>4182.33</td><td>4211.52</td><td>4148.89</td><td>4131.56</td><td>2149104.50</td><td>-125.26</td><td>-2.93</td><td>4211.520</td><td>4211.520</td><td>4211.520</td><td>1881291.25</td><td>1881291.25</td><td>1881291.25</td></tr><tr><th>2018-02-05</th><td>4204.46</td><td>4274.15</td><td>4274.15</td><td>4200.14</td><td>1613478.00</td><td>2.92</td><td>0.07</td><td>4274.150</td><td>4274.150</td><td>4274.150</td><td>1613478.00</td><td>1613478.00</td><td>1613478.00</td></tr></tbody></table><p>605 rows × 13 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h_s.sort_index(inplace=<span class="literal">True</span>); <span class="comment">#按时间重新排序 </span></span><br><span class="line">h_s<span class="comment">#.iloc[:6,:7]      #显示排序后数据的前6行7列</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>open</th><th>high</th><th>close</th><th>low</th><th>volume</th><th>price_change</th><th>p_change</th><th>ma5</th><th>ma10</th><th>ma20</th><th>v_ma5</th><th>v_ma10</th><th>v_ma20</th></tr><tr><th>date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2018-02-05</th><td>4204.46</td><td>4274.15</td><td>4274.15</td><td>4200.14</td><td>1613478.00</td><td>2.92</td><td>0.07</td><td>4274.150</td><td>4274.150</td><td>4274.150</td><td>1613478.00</td><td>1613478.00</td><td>1613478.00</td></tr><tr><th>2018-02-06</th><td>4182.33</td><td>4211.52</td><td>4148.89</td><td>4131.56</td><td>2149104.50</td><td>-125.26</td><td>-2.93</td><td>4211.520</td><td>4211.520</td><td>4211.520</td><td>1881291.25</td><td>1881291.25</td><td>1881291.25</td></tr><tr><th>2018-02-07</th><td>4205.74</td><td>4212.57</td><td>4050.50</td><td>4048.42</td><td>2031274.88</td><td>-98.39</td><td>-2.37</td><td>4157.847</td><td>4157.847</td><td>4157.847</td><td>1931285.79</td><td>1931285.79</td><td>1931285.79</td></tr><tr><th>2018-02-08</th><td>4022.88</td><td>4071.67</td><td>4012.05</td><td>3974.68</td><td>1592699.88</td><td>-38.45</td><td>-0.95</td><td>4121.398</td><td>4121.398</td><td>4121.398</td><td>1846639.32</td><td>1846639.32</td><td>1846639.32</td></tr><tr><th>2018-02-09</th><td>3896.17</td><td>3911.29</td><td>3840.65</td><td>3759.15</td><td>2063498.25</td><td>-171.40</td><td>-4.27</td><td>4065.248</td><td>4065.248</td><td>4065.248</td><td>1890011.10</td><td>1890011.10</td><td>1890011.10</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>2020-07-29</th><td>4559.16</td><td>4680.56</td><td>4679.01</td><td>4548.85</td><td>1866953.00</td><td>110.75</td><td>2.42</td><td>4598.750</td><td>4614.049</td><td>4651.809</td><td>1998208.25</td><td>2161820.60</td><td>2712211.46</td></tr><tr><th>2020-07-30</th><td>4689.76</td><td>4704.63</td><td>4656.15</td><td>4649.77</td><td>1669675.62</td><td>-22.86</td><td>-0.49</td><td>4587.492</td><td>4628.039</td><td>4667.824</td><td>1863514.22</td><td>2044131.04</td><td>2669225.56</td></tr><tr><th>2020-07-31</th><td>4652.18</td><td>4741.81</td><td>4695.05</td><td>4621.96</td><td>1848390.25</td><td>38.90</td><td>0.83</td><td>4625.384</td><td>4643.074</td><td>4681.597</td><td>1745381.87</td><td>2021594.50</td><td>2616402.29</td></tr><tr><th>2020-08-03</th><td>4735.90</td><td>4771.37</td><td>4771.31</td><td>4720.03</td><td>2147762.50</td><td>76.26</td><td>1.62</td><td>4673.956</td><td>4652.175</td><td>4686.658</td><td>1832093.27</td><td>1990301.82</td><td>2520879.91</td></tr><tr><th>2020-08-04</th><td>4778.49</td><td>4807.08</td><td>4775.80</td><td>4747.77</td><td>2399749.75</td><td>4.49</td><td>0.09</td><td>4715.464</td><td>4660.651</td><td>4690.541</td><td>1986506.22</td><td>2029861.14</td><td>2437863.12</td></tr></tbody></table><p>605 rows × 13 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h_s[<span class="string">&#x27;close&#x27;</span>].plot(figsize=(<span class="number">10</span>,<span class="number">6</span>));</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071621983.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h_s[<span class="string">&#x27;price_change&#x27;</span>].plot(figsize=(<span class="number">10</span>,<span class="number">6</span>)).axhline(y=<span class="number">0</span>,color=<span class="string">&#x27;red&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620495.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h_s[[<span class="string">&#x27;close&#x27;</span>,<span class="string">&#x27;ma5&#x27;</span>,<span class="string">&#x27;ma10&#x27;</span>,<span class="string">&#x27;ma20&#x27;</span>]].plot(figsize=(<span class="number">10</span>,<span class="number">6</span>));</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620735.png" alt="png"></p><p>10.1.2.2 公司盈利能力分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取本地2020年第1季度的盈利能力数据  </span></span><br><span class="line"><span class="comment">#p_d=ts.get_profit_data(2020,1); p_d.info() #在线获取2020年第1季度的盈利能力数据</span></span><br><span class="line">p_d=pd.read_excel(<span class="string">&#x27;data/tushare.xlsx&#x27;</span>,<span class="string">&#x27;profit_data&#x27;</span>,index_col=<span class="number">0</span>); p_d.info()  </span><br></pre></td></tr></table></figure><pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 3920 entries, 0 to 3919
Data columns (total 9 columns):
 #   Column             Non-Null Count  Dtype  
---  ------             --------------  -----  
 0   code               3920 non-null   int64  
 1   name               3920 non-null   object 
 2   roe                3881 non-null   float64
 3   net_profit_ratio   3914 non-null   float64
 4   gross_profit_rate  3888 non-null   float64
 5   net_profits        3920 non-null   float64
 6   eps                3664 non-null   float64
 7   business_income    3919 non-null   float64
 8   bips               3663 non-null   float64
dtypes: float64(7), int64(1), object(1)
memory usage: 306.2+ KB</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p_d.columns=[<span class="string">&#x27;代码&#x27;</span>,<span class="string">&#x27;名称&#x27;</span>,<span class="string">&#x27;净收益率&#x27;</span>,<span class="string">&#x27;净利润率&#x27;</span>,<span class="string">&#x27;毛利润率&#x27;</span>,</span><br><span class="line">             <span class="string">&#x27;净利润额&#x27;</span>, <span class="string">&#x27;每股收益&#x27;</span>,<span class="string">&#x27;营业收入&#x27;</span>,<span class="string">&#x27;主营收入&#x27;</span>]</span><br><span class="line">p_d[<span class="string">&#x27;代码&#x27;</span>] = p_d[<span class="string">&#x27;代码&#x27;</span>].astype(<span class="built_in">str</span>) <span class="comment">#强制代码列为字符串</span></span><br><span class="line">p_d.head()</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>代码</th><th>名称</th><th>净收益率</th><th>净利润率</th><th>毛利润率</th><th>净利润额</th><th>每股收益</th><th>营业收入</th><th>主营收入</th></tr><tr><th>0</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>0</th><td>2260</td><td>*ST德奥</td><td>58.16</td><td>68.55</td><td>20.6704</td><td>33.7153</td><td>NaN</td><td>49.1790</td><td>NaN</td></tr><tr><th>1</th><td>2069</td><td>獐子岛</td><td>52.87</td><td>0.93</td><td>8.7116</td><td>3.7139</td><td>0.0052</td><td>398.4875</td><td>0.5603</td></tr><tr><th>2</th><td>600961</td><td>株冶集团</td><td>40.07</td><td>1.21</td><td>4.6506</td><td>41.7089</td><td>0.0790</td><td>3422.5768</td><td>6.4888</td></tr><tr><th>3</th><td>2605</td><td>姚记科技</td><td>33.05</td><td>124.13</td><td>67.3586</td><td>663.4285</td><td>1.6588</td><td>534.4203</td><td>1.3362</td></tr><tr><th>4</th><td>2437</td><td>誉衡药业</td><td>30.17</td><td>113.35</td><td>67.9203</td><td>658.6003</td><td>NaN</td><td>581.0199</td><td>NaN</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p_d.describe() <span class="comment">#基本统计分析</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>净收益率</th><th>净利润率</th><th>毛利润率</th><th>净利润额</th><th>每股收益</th><th>营业收入</th><th>主营收入</th></tr></thead><tbody><tr><th>count</th><td>3881.000000</td><td>3914.000000</td><td>3888.000000</td><td>3920.000000</td><td>3664.000000</td><td>3919.000000</td><td>3663.000000</td></tr><tr><th>mean</th><td>-0.160925</td><td>-135.851091</td><td>27.095283</td><td>231.583835</td><td>0.071447</td><td>2737.076361</td><td>1.288017</td></tr><tr><th>std</th><td>24.390056</td><td>4323.334538</td><td>42.017779</td><td>2918.191181</td><td>0.270705</td><td>18093.421193</td><td>2.396955</td></tr><tr><th>min</th><td>-1304.670000</td><td>-183209.980000</td><td>-1588.817500</td><td>-19782.000000</td><td>-0.783000</td><td>0.000000</td><td>0.000000</td></tr><tr><th>25%</th><td>-0.590000</td><td>-4.027500</td><td>15.640475</td><td>-7.755225</td><td>-0.016900</td><td>127.088650</td><td>0.310550</td></tr><tr><th>50%</th><td>0.810000</td><td>3.970000</td><td>26.367100</td><td>14.218500</td><td>0.031800</td><td>333.993000</td><td>0.697500</td></tr><tr><th>75%</th><td>2.120000</td><td>12.267500</td><td>39.588375</td><td>63.354925</td><td>0.112125</td><td>1003.509400</td><td>1.386550</td></tr><tr><th>max</th><td>58.160000</td><td>858.670000</td><td>107.953300</td><td>84494.000000</td><td>10.423300</td><td>555502.000000</td><td>46.692000</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p_d.corr()   <span class="comment">#相关性分析</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>净收益率</th><th>净利润率</th><th>毛利润率</th><th>净利润额</th><th>每股收益</th><th>营业收入</th><th>主营收入</th></tr></thead><tbody><tr><th>净收益率</th><td>1.000000</td><td>0.015184</td><td>0.063490</td><td>0.018065</td><td>0.220348</td><td>0.009420</td><td>0.079012</td></tr><tr><th>净利润率</th><td>0.015184</td><td>1.000000</td><td>0.006839</td><td>0.004677</td><td>0.046043</td><td>0.005054</td><td>0.017930</td></tr><tr><th>毛利润率</th><td>0.063490</td><td>0.006839</td><td>1.000000</td><td>0.034764</td><td>0.195615</td><td>-0.021009</td><td>-0.061525</td></tr><tr><th>净利润额</th><td>0.018065</td><td>0.004677</td><td>0.034764</td><td>1.000000</td><td>0.156741</td><td>0.419270</td><td>0.048213</td></tr><tr><th>每股收益</th><td>0.220348</td><td>0.046043</td><td>0.195615</td><td>0.156741</td><td>1.000000</td><td>0.091409</td><td>0.339545</td></tr><tr><th>营业收入</th><td>0.009420</td><td>0.005054</td><td>-0.021009</td><td>0.419270</td><td>0.091409</td><td>1.000000</td><td>0.242651</td></tr><tr><th>主营收入</th><td>0.079012</td><td>0.017930</td><td>-0.061525</td><td>0.048213</td><td>0.339545</td><td>0.242651</td><td>1.000000</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.plotting.scatter_matrix(p_d,figsize=(<span class="number">10</span>,<span class="number">8</span>));     <span class="comment">#矩阵散点图</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png" alt="png"></p><h3 id="10-1-3-Tushare数据的保存及扩展"><a href="#10-1-3-Tushare数据的保存及扩展" class="headerlink" title="10.1.3 Tushare数据的保存及扩展"></a>10.1.3 Tushare数据的保存及扩展</h3><p>10.1.3.1 Tushare数据的保存</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#xlsx = pd.ExcelWriter(&#x27;tushare.xlsx&#x27;)</span></span><br><span class="line"><span class="comment">#s_b.to_excel(xlsx,&#x27;stock_basics&#x27;)    #沪深上市公司的基本信息</span></span><br><span class="line"><span class="comment">#n_s.to_excel(xlsx,&#x27;new_stocks&#x27;)      #新股发行数据</span></span><br><span class="line"><span class="comment">#h_s.to_excel(xlsx,&#x27;hist_data&#x27;)       #沪深300近三年历史行情数据</span></span><br><span class="line"><span class="comment">#p_d.to_excel(xlsx,&#x27;profit_data&#x27;)     #公司盈利能力数据</span></span><br><span class="line"><span class="comment">#xlsx.save()</span></span><br></pre></td></tr></table></figure><p>10.1.3.2 Tushare平台的扩展</p><h2 id="10-2-新浪财经数据的获取与分析"><a href="#10-2-新浪财经数据的获取与分析" class="headerlink" title="10.2 新浪财经数据的获取与分析"></a>10.2 新浪财经数据的获取与分析</h2><h3 id="10-2-1-国内生产总值的复制与分析"><a href="#10-2-1-国内生产总值的复制与分析" class="headerlink" title="10.2.1 国内生产总值的复制与分析"></a>10.2.1 国内生产总值的复制与分析</h3><p>10.2.1.1 国内生产总值的复制与分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> IFrame</span><br><span class="line">IFrame(<span class="string">&quot;http://finance.sina.com.cn/mac&quot;</span>,width=<span class="number">960</span>,height=<span class="number">560</span>)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe</span><br><span class="line">    width=&quot;960&quot;</span><br><span class="line">    height=&quot;560&quot;</span><br><span class="line">    src=&quot;http://finance.sina.com.cn/mac&quot;</span><br><span class="line">    frameborder=&quot;0&quot;</span><br><span class="line">    allowfullscreen</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment">#GDP=pd.read_clipboard(index_col=0);GDP </span></span><br><span class="line">GDP=pd.read_table(<span class="string">&#x27;data/GDP.txt&#x27;</span>,index_col=<span class="number">0</span>,encoding=<span class="string">&#x27;GBK&#x27;</span>);GDP</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>国内生产总值(亿元)</th><th>人均国内生产总值(元)</th></tr><tr><th>年份</th><th></th><th></th></tr></thead><tbody><tr><th>2020</th><td>1015986.20</td><td>72000.00</td></tr><tr><th>2019</th><td>990865.11</td><td>70891.78</td></tr><tr><th>2018</th><td>919281.10</td><td>66005.70</td></tr><tr><th>2017</th><td>832035.90</td><td>60014.00</td></tr><tr><th>2016</th><td>746395.10</td><td>54139.00</td></tr><tr><th>2015</th><td>688858.20</td><td>50237.00</td></tr><tr><th>2014</th><td>643563.10</td><td>47173.00</td></tr><tr><th>2013</th><td>592963.20</td><td>43684.00</td></tr><tr><th>2012</th><td>538580.00</td><td>39874.00</td></tr><tr><th>2011</th><td>487940.20</td><td>36302.00</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GDP.plot();</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620732.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GDP.sort_index(inplace=<span class="literal">True</span>); GDP   <span class="comment">#按年份排序</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>国内生产总值(亿元)</th><th>人均国内生产总值(元)</th></tr><tr><th>年份</th><th></th><th></th></tr></thead><tbody><tr><th>2011</th><td>487940.20</td><td>36302.00</td></tr><tr><th>2012</th><td>538580.00</td><td>39874.00</td></tr><tr><th>2013</th><td>592963.20</td><td>43684.00</td></tr><tr><th>2014</th><td>643563.10</td><td>47173.00</td></tr><tr><th>2015</th><td>688858.20</td><td>50237.00</td></tr><tr><th>2016</th><td>746395.10</td><td>54139.00</td></tr><tr><th>2017</th><td>832035.90</td><td>60014.00</td></tr><tr><th>2018</th><td>919281.10</td><td>66005.70</td></tr><tr><th>2019</th><td>990865.11</td><td>70891.78</td></tr><tr><th>2020</th><td>1015986.20</td><td>72000.00</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt            </span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>];  <span class="comment">#中文字为黑体</span></span><br><span class="line">GDP.plot(kind=<span class="string">&#x27;bar&#x27;</span>,y=[<span class="string">&#x27;国内生产总值(亿元)&#x27;</span>,<span class="string">&#x27;人均国内生产总值(元)&#x27;</span>],</span><br><span class="line">         secondary_y=[<span class="string">&#x27;人均国内生产总值(元)&#x27;</span>]);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071622787.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> CurrentConfig,NotebookType   <span class="comment">#在NoteBook中设置pyecharts绘图</span></span><br><span class="line">CurrentConfig.NOTEBOOK_TYPE = NotebookType.JUPYTER_LAB     <span class="comment">#在Jupyterlab中显示pyecharts图</span></span><br><span class="line"><span class="keyword">import</span> pyecharts.options <span class="keyword">as</span> opts                           <span class="comment">#加载pyecharts全局参数</span></span><br><span class="line">figsize=opts.InitOpts(width=<span class="string">&#x27;600px&#x27;</span>,height=<span class="string">&#x27;400px&#x27;</span>,bg_color=<span class="string">&#x27;white&#x27;</span>) <span class="comment">#设置图形大小和背景色 </span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar  <span class="comment">#加载pyecharts绘制条图（Bar）函数</span></span><br><span class="line">Bar().load_javascript()           <span class="comment">#制图前需加载一次JavaScript函数！！</span></span><br></pre></td></tr></table></figure><pre><code>&lt;pyecharts.render.display.Javascript at 0xd6a4a60&gt;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(Bar(figsize)</span><br><span class="line">     .add_xaxis(<span class="built_in">list</span>(GDP.index))</span><br><span class="line">     .add_yaxis(<span class="string">&#x27;国内生产总值(亿元)&#x27;</span>,<span class="built_in">list</span>(GDP[<span class="string">&#x27;国内生产总值(亿元)&#x27;</span>]))     </span><br><span class="line">     .render_notebook()   </span><br><span class="line">)</span><br></pre></td></tr></table></figure><!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><div id="d3bb575a341b41fb86f903e36a1c7caa" class="chart-container" style="width:600px;height:400px"></div><script>var chart_d3bb575a341b41fb86f903e36a1c7caa=echarts.init(document.getElementById("d3bb575a341b41fb86f903e36a1c7caa"),"white",{renderer:"canvas"}),option_d3bb575a341b41fb86f903e36a1c7caa={backgroundColor:"white",animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"bar",name:"国内生产总值(亿元)",legendHoverLink:!0,data:[487940.2,538580,592963.2,643563.1,688858.2,746395.1,832035.9,919281.1,990865.11,1015986.2],showBackground:!1,barMinHeight:0,barCategoryGap:"20%",barGap:"30%",large:!1,largeThreshold:400,seriesLayoutBy:"column",datasetIndex:0,clip:!0,zlevel:0,z:2,label:{show:!0,position:"top",margin:8}}],legend:[{data:["国内生产总值(亿元)"],selected:{"国内生产总值(亿元)":!0}}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5},xAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020]}],yAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}]};chart_d3bb575a341b41fb86f903e36a1c7caa.setOption(option_d3bb575a341b41fb86f903e36a1c7caa)</script></body></html><p>10.2.1.2 存贷款基准利率的走势分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Rate=pd.read_clipboard(index_col=0);Rate</span></span><br><span class="line">Rate=pd.read_table(<span class="string">&#x27;data/Rate.txt&#x27;</span>,index_col=<span class="number">0</span>,encoding=<span class="string">&#x27;GBK&#x27;</span>);Rate</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>存款利率(%)</th><th>贷款利率(%)</th></tr><tr><th>调整时间</th><th></th><th></th></tr></thead><tbody><tr><th>2015-10-24</th><td>1.50</td><td>4.35</td></tr><tr><th>2015-08-26</th><td>1.75</td><td>4.60</td></tr><tr><th>2015-06-28</th><td>2.00</td><td>4.85</td></tr><tr><th>2015-05-11</th><td>2.25</td><td>5.10</td></tr><tr><th>2015-03-01</th><td>2.50</td><td>5.35</td></tr><tr><th>2014-11-22</th><td>2.75</td><td>5.60</td></tr><tr><th>2012-07-06</th><td>3.00</td><td>6.00</td></tr><tr><th>2012-06-08</th><td>3.25</td><td>6.31</td></tr><tr><th>2011-07-07</th><td>3.50</td><td>6.56</td></tr><tr><th>2011-04-06</th><td>3.25</td><td>6.31</td></tr><tr><th>2011-02-09</th><td>3.00</td><td>6.06</td></tr><tr><th>2010-12-26</th><td>2.75</td><td>5.81</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rate.sort_index(inplace=<span class="literal">True</span>); Rate  <span class="comment">#按日期排序</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>存款利率(%)</th><th>贷款利率(%)</th></tr><tr><th>调整时间</th><th></th><th></th></tr></thead><tbody><tr><th>2010-12-26</th><td>2.75</td><td>5.81</td></tr><tr><th>2011-02-09</th><td>3.00</td><td>6.06</td></tr><tr><th>2011-04-06</th><td>3.25</td><td>6.31</td></tr><tr><th>2011-07-07</th><td>3.50</td><td>6.56</td></tr><tr><th>2012-06-08</th><td>3.25</td><td>6.31</td></tr><tr><th>2012-07-06</th><td>3.00</td><td>6.00</td></tr><tr><th>2014-11-22</th><td>2.75</td><td>5.60</td></tr><tr><th>2015-03-01</th><td>2.50</td><td>5.35</td></tr><tr><th>2015-05-11</th><td>2.25</td><td>5.10</td></tr><tr><th>2015-06-28</th><td>2.00</td><td>4.85</td></tr><tr><th>2015-08-26</th><td>1.75</td><td>4.60</td></tr><tr><th>2015-10-24</th><td>1.50</td><td>4.35</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Line  <span class="comment">#加载pyecharts绘制线图（Line）函数</span></span><br><span class="line">(Line(figsize)</span><br><span class="line">     .add_xaxis(<span class="built_in">list</span>(Rate.index))</span><br><span class="line">     .add_yaxis(<span class="string">&#x27;存款利率(%)&#x27;</span>,<span class="built_in">list</span>(Rate[<span class="string">&#x27;存款利率(%)&#x27;</span>]))</span><br><span class="line">     .add_yaxis(<span class="string">&#x27;贷款利率(%)&#x27;</span>,<span class="built_in">list</span>(Rate[<span class="string">&#x27;贷款利率(%)&#x27;</span>]))</span><br><span class="line">     .render_notebook()</span><br><span class="line">)</span><br></pre></td></tr></table></figure><!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><div id="ee47b5dfa0f341be9d27e7004db2a509" class="chart-container" style="width:600px;height:400px"></div><script>var chart_ee47b5dfa0f341be9d27e7004db2a509=echarts.init(document.getElementById("ee47b5dfa0f341be9d27e7004db2a509"),"white",{renderer:"canvas"}),option_ee47b5dfa0f341be9d27e7004db2a509={backgroundColor:"white",animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"line",name:"存款利率(%)",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:[["2010-12-26",2.75],["2011-02-09",3],["2011-04-06",3.25],["2011-07-07",3.5],["2012-06-08",3.25],["2012-07-06",3],["2014-11-22",2.75],["2015-03-01",2.5],["2015-05-11",2.25],["2015-06-28",2],["2015-08-26",1.75],["2015-10-24",1.5]],hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"贷款利率(%)",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:[["2010-12-26",5.81],["2011-02-09",6.06],["2011-04-06",6.31],["2011-07-07",6.56],["2012-06-08",6.31],["2012-07-06",6],["2014-11-22",5.6],["2015-03-01",5.35],["2015-05-11",5.1],["2015-06-28",4.85],["2015-08-26",4.6],["2015-10-24",4.35]],hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0}],legend:[{data:["存款利率(%)","贷款利率(%)"],selected:{"存款利率(%)":!0,"贷款利率(%)":!0}}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5},xAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:["2010-12-26","2011-02-09","2011-04-06","2011-07-07","2012-06-08","2012-07-06","2014-11-22","2015-03-01","2015-05-11","2015-06-28","2015-08-26","2015-10-24"]}],yAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}]};chart_ee47b5dfa0f341be9d27e7004db2a509.setOption(option_ee47b5dfa0f341be9d27e7004db2a509)</script></body></html><h3 id="10-2-2-板块行情数据的抓取与分析"><a href="#10-2-2-板块行情数据的抓取与分析" class="headerlink" title="10.2.2 板块行情数据的抓取与分析"></a>10.2.2 板块行情数据的抓取与分析</h3><p>10.2.2.1 次新股数据的复制方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#new_stock=pd.read_clipboard(index_col=0);new_stock</span></span><br></pre></td></tr></table></figure><p>10.2.2.2 次新股数据的基本分析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#new_stock.sort_values(by=&#x27;涨跌额&#x27;,ascending=False).head(10) #涨幅前十的新股</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#new_stock.to_csv(&#x27;new_stock.csv&#x27;)                     #保存数据到csv表格中</span></span><br><span class="line"><span class="comment">#new_stock=pd.read_csv(&#x27;new_stock.csv&#x27;,index_col=0)   #从csv文档中读取数据</span></span><br></pre></td></tr></table></figure><h2 id="10-3-中商情报数据的可视化分析"><a href="#10-3-中商情报数据的可视化分析" class="headerlink" title="10.3  中商情报数据的可视化分析"></a>10.3 中商情报数据的可视化分析</h2><h3 id="10-3-1-宏观经济数据爬取与分析"><a href="#10-3-1-宏观经济数据爬取与分析" class="headerlink" title="10.3.1 宏观经济数据爬取与分析"></a>10.3.1 宏观经济数据爬取与分析</h3><p>10.3.1.1 行政区划数据的抓取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests                                   <span class="comment">#加载爬虫库</span></span><br><span class="line">url=<span class="string">&#x27;https://s.askci.com/data/year&#x27;</span>               <span class="comment">#综合数据之行政区划页</span></span><br><span class="line">html = requests.get(url).content.decode(<span class="string">&#x27;utf-8&#x27;</span>); <span class="comment">#获取网页信息</span></span><br><span class="line">html[:<span class="number">10</span>]                                        <span class="comment">#显示网页信息，前300个字符</span></span><br></pre></td></tr></table></figure><pre><code>&#39;\ufeff&lt;!doctype&#39;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取第1页表格数据：行政区划，依次类推 [0,1,2,3,4]</span></span><br><span class="line">admin=pd.read_html(html,header=<span class="number">0</span>,index_col=<span class="number">0</span>)[<span class="number">0</span>]; admin</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th></tr><tr><th>指标</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>地级区划数(个)</th><td>333</td><td>334</td><td>334</td><td>334</td><td>333</td><td>333</td><td>333</td></tr><tr><th>地级市数(个)</th><td>293</td><td>294</td><td>293</td><td>291</td><td>288</td><td>286</td><td>285</td></tr><tr><th>县级区划数(个)</th><td>2851</td><td>2851</td><td>2851</td><td>2850</td><td>2854</td><td>2853</td><td>2852</td></tr><tr><th>市辖区数(个)</th><td>970</td><td>962</td><td>954</td><td>921</td><td>897</td><td>872</td><td>860</td></tr><tr><th>县级市数(个)</th><td>375</td><td>363</td><td>360</td><td>361</td><td>361</td><td>368</td><td>368</td></tr><tr><th>县数(个)</th><td>1335</td><td>1355</td><td>1366</td><td>1397</td><td>1425</td><td>1442</td><td>1453</td></tr><tr><th>自治县数(个)</th><td>117</td><td>117</td><td>117</td><td>117</td><td>117</td><td>117</td><td>117</td></tr><tr><th>乡镇级区划数(个)</th><td>39945</td><td>39888</td><td>39862</td><td>39789</td><td>40381</td><td>40497</td><td>40446</td></tr><tr><th>镇数(个)</th><td>21297</td><td>21116</td><td>20883</td><td>20515</td><td>20401</td><td>20117</td><td>19881</td></tr><tr><th>乡数(个)</th><td>10253</td><td>10529</td><td>10872</td><td>11315</td><td>12282</td><td>12812</td><td>13281</td></tr><tr><th>街道办事处(个)</th><td>8393</td><td>8241</td><td>8105</td><td>7957</td><td>7696</td><td>7566</td><td>7282</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin[:<span class="number">1</span>].T.plot(kind=<span class="string">&#x27;bar&#x27;</span>,ylim=[<span class="number">0</span>,<span class="number">500</span>]); <span class="comment">#地级区划数图</span></span><br></pre></td></tr></table></figure><p>​<br><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620776.png" alt="png"><br>​</p><p>10.3.1.2 国内生产总值数据的抓取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url=<span class="string">&#x27;https://s.askci.com/data/year/a02/&#x27;</span>   <span class="comment">#国民经济核算之国内生产总值页</span></span><br><span class="line">html = requests.get(url).content.decode(<span class="string">&#x27;utf-8&#x27;</span>); </span><br><span class="line">gdp=pd.read_html(html,header=<span class="number">0</span>,index_col=<span class="number">0</span>)[<span class="number">0</span>]; gdp</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th></tr><tr><th>指标</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>国民总收入(亿元)</th><td>896915.6</td><td>820099.5</td><td>737074.0</td><td>683390.5</td><td>642097.6</td><td>588141.2</td><td>537329.0</td></tr><tr><th>国内生产总值(亿元)</th><td>900309.5</td><td>820754.3</td><td>740060.8</td><td>685992.9</td><td>641280.6</td><td>592963.2</td><td>538580.0</td></tr><tr><th>第一产业增加值(亿元)</th><td>64734.0</td><td>62099.5</td><td>60139.2</td><td>57774.6</td><td>55626.3</td><td>53028.1</td><td>49084.5</td></tr><tr><th>第二产业增加值(亿元)</th><td>366000.9</td><td>332742.7</td><td>296547.7</td><td>282040.3</td><td>277571.8</td><td>261956.1</td><td>244643.3</td></tr><tr><th>第三产业增加值(亿元)</th><td>469574.6</td><td>425912.1</td><td>383373.9</td><td>346178.0</td><td>308082.5</td><td>277979.1</td><td>244852.2</td></tr><tr><th>人均国内生产总值(元)</th><td>64644.0</td><td>59201.0</td><td>53680.0</td><td>50028.0</td><td>47005.0</td><td>43684.0</td><td>39874.0</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdp[:<span class="number">2</span>].T.plot(kind=<span class="string">&#x27;bar&#x27;</span>); <span class="comment">#国民总收入和国内生产总值</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620420.png" alt="png"></p><h3 id="10-3-2-A股股票信息的爬取与分析"><a href="#10-3-2-A股股票信息的爬取与分析" class="headerlink" title="10.3.2 A股股票信息的爬取与分析"></a>10.3.2 A股股票信息的爬取与分析</h3><p>10.3.2.1 A股收益数据的抓取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url=<span class="string">&#x27;https://s.askci.com/stock/a&#x27;</span>  <span class="comment">#A股信息</span></span><br><span class="line">html = requests.get(url).content.decode(<span class="string">&#x27;utf-8&#x27;</span>); </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">pd.read_html(html,header=<span class="number">0</span>)[<span class="number">0</span>] <span class="comment"># 获取第1个表格数据：A股公司营业收入排行榜(2019年)</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>排名</th><th>股票代码</th><th>企业简称</th><th>营业收入（亿元）</th></tr></thead><tbody><tr><th>0</th><td>1</td><td>600028</td><td>中国石化</td><td>21059.84</td></tr><tr><th>1</th><td>2</td><td>601857</td><td>中国石油</td><td>19338.36</td></tr><tr><th>2</th><td>3</td><td>601668</td><td>中国建筑</td><td>16150.23</td></tr><tr><th>3</th><td>4</td><td>601318</td><td>中国平安</td><td>12183.15</td></tr><tr><th>4</th><td>5</td><td>601390</td><td>中国中铁</td><td>9714.05</td></tr><tr><th>5</th><td>6</td><td>601186</td><td>中国铁建</td><td>9103.25</td></tr><tr><th>6</th><td>7</td><td>601398</td><td>工商银行</td><td>8826.65</td></tr><tr><th>7</th><td>8</td><td>601628</td><td>中国人寿</td><td>8249.61</td></tr><tr><th>8</th><td>9</td><td>601939</td><td>建设银行</td><td>7558.58</td></tr><tr><th>9</th><td>10</td><td>600104</td><td>上汽集团</td><td>7230.43</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取第2个表格数据：A股公司净利润排行榜(2019年)</span></span><br><span class="line">pd.read_html(html,header=<span class="number">0</span>)[<span class="number">1</span>] </span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>排名</th><th>股票代码</th><th>企业简称</th><th>净利润（亿元）</th></tr></thead><tbody><tr><th>0</th><td>1</td><td>601398</td><td>工商银行</td><td>3176.85</td></tr><tr><th>1</th><td>2</td><td>601939</td><td>建设银行</td><td>2735.79</td></tr><tr><th>2</th><td>3</td><td>601288</td><td>农业银行</td><td>2164.00</td></tr><tr><th>3</th><td>4</td><td>601988</td><td>中国银行</td><td>2050.96</td></tr><tr><th>4</th><td>5</td><td>601318</td><td>中国平安</td><td>1593.59</td></tr><tr><th>5</th><td>6</td><td>600036</td><td>招商银行</td><td>979.59</td></tr><tr><th>6</th><td>7</td><td>601328</td><td>交通银行</td><td>795.70</td></tr><tr><th>7</th><td>8</td><td>601668</td><td>中国建筑</td><td>709.50</td></tr><tr><th>8</th><td>9</td><td>601166</td><td>兴业银行</td><td>676.81</td></tr><tr><th>9</th><td>10</td><td>601658</td><td>邮储银行</td><td>643.18</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取第3个表格数据：A股公司利润总额排行榜(2019年)</span></span><br><span class="line">pd.read_html(html,header=<span class="number">0</span>)[<span class="number">2</span>] </span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>排名</th><th>股票代码</th><th>企业简称</th><th>利润总额（亿元）</th></tr></thead><tbody><tr><th>0</th><td>1</td><td>601398</td><td>工商银行</td><td>3921.26</td></tr><tr><th>1</th><td>2</td><td>601939</td><td>建设银行</td><td>3366.16</td></tr><tr><th>2</th><td>3</td><td>601288</td><td>农业银行</td><td>2650.50</td></tr><tr><th>3</th><td>4</td><td>601988</td><td>中国银行</td><td>2463.78</td></tr><tr><th>4</th><td>5</td><td>601318</td><td>中国平安</td><td>1877.64</td></tr><tr><th>5</th><td>6</td><td>600036</td><td>招商银行</td><td>1224.40</td></tr><tr><th>6</th><td>7</td><td>601668</td><td>中国建筑</td><td>942.91</td></tr><tr><th>7</th><td>8</td><td>601328</td><td>交通银行</td><td>864.25</td></tr><tr><th>8</th><td>9</td><td>2</td><td>万科A</td><td>796.76</td></tr><tr><th>9</th><td>10</td><td>601166</td><td>兴业银行</td><td>766.37</td></tr></tbody></table></div><p>10.3.2.2 A股股票信息的爬取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建获取当前页的第4个表格数据的函数，其中i表示第i页，即取pageNum=i,以此类推！</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_stock</span>(<span class="params">i</span>):</span> </span><br><span class="line">    url=<span class="string">&#x27;https://s.askci.com/stock/a/0-0?reportTime=2020-03-31&amp;pageNum=&#x27;</span> </span><br><span class="line">    html = requests.get(url+<span class="built_in">str</span>(i)).content.decode(<span class="string">&#x27;utf-8&#x27;</span>); </span><br><span class="line">    data=pd.read_html(html,header=<span class="number">0</span>)[<span class="number">3</span>] </span><br><span class="line">    <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stock1=get_stock(<span class="number">1</span>);stock1      <span class="comment">#第1页A股信息</span></span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>序号</th><th>股票代码</th><th>股票简称</th><th>公司名称</th><th>省份</th><th>城市</th><th>主营业务收入(202003)</th><th>净利润(202003)</th><th>员工人数</th><th>上市日期</th><th>招股书</th><th>公司财报</th><th>行业分类</th><th>产品类型</th><th>主营业务</th></tr></thead><tbody><tr><th>0</th><td>1</td><td>1</td><td>平安银行</td><td>平安银行股份有限公司</td><td>广东</td><td>深圳市</td><td>379.26亿</td><td>85.48亿</td><td>36676</td><td>1991-04-03</td><td>--</td><td>NaN</td><td>银行</td><td>商业银行业务</td><td>经有关监管机构批准的各项商业银行业务。</td></tr><tr><th>1</th><td>2</td><td>2</td><td>万科A</td><td>万科企业股份有限公司</td><td>广东</td><td>深圳市</td><td>477.74亿</td><td>24.30亿</td><td>140565</td><td>1991-01-29</td><td>--</td><td>NaN</td><td>房地产开发</td><td>房地产、物业管理、投资咨询</td><td>房地产开发和物业服务。</td></tr><tr><th>2</th><td>3</td><td>4</td><td>国华网安</td><td>深圳国华网安科技股份有限公司</td><td>广东</td><td>深圳市</td><td>2325.30万</td><td>357.53万</td><td>264</td><td>1991-01-14</td><td>--</td><td>NaN</td><td>生物医药</td><td>移动应用安全服务、移动互联网游戏</td><td>移动应用安全服务业务。</td></tr><tr><th>3</th><td>4</td><td>5</td><td>ST星源</td><td>深圳世纪星源股份有限公司</td><td>广东</td><td>深圳市</td><td>4570.29万</td><td>-2235.80万</td><td>629</td><td>1990-12-10</td><td>--</td><td>NaN</td><td>环保工程、物业管理</td><td>酒店经营、物业管理、环保业务</td><td>绿色低碳城市社区建设相关的服务业务。</td></tr><tr><th>4</th><td>5</td><td>6</td><td>深振业A</td><td>深圳市振业(集团)股份有限公司</td><td>广东</td><td>深圳市</td><td>6.52亿</td><td>1.41亿</td><td>397</td><td>1992-04-27</td><td>--</td><td>NaN</td><td>房地产开发</td><td>房地产</td><td>从事房地产开发与销售。</td></tr><tr><th>5</th><td>6</td><td>7</td><td>*ST全新</td><td>深圳市全新好股份有限公司</td><td>广东</td><td>深圳市</td><td>876.49万</td><td>-2281.79万</td><td>76</td><td>1992-04-13</td><td>--</td><td>NaN</td><td>物业经营</td><td>物业管理及停车费、房屋租赁、一次性口罩、纳米胶囊、杀菌纸巾</td><td>物业管理和房屋租赁业等</td></tr><tr><th>6</th><td>7</td><td>8</td><td>神州高铁</td><td>神州高铁技术股份有限公司</td><td>北京</td><td>北京市</td><td>1.19亿</td><td>-1.08亿</td><td>2394</td><td>1992-05-07</td><td>--</td><td>NaN</td><td>轨道交通设备</td><td>轨道交通</td><td>专业致力于提供轨道交通运营检修装备与数据、线路运营、维保服务。</td></tr><tr><th>7</th><td>8</td><td>9</td><td>中国宝安</td><td>中国宝安集团股份有限公司</td><td>广东</td><td>深圳市</td><td>16.28亿</td><td>1.14亿</td><td>13345</td><td>1991-06-25</td><td>--</td><td>NaN</td><td>综合</td><td>高新技术产业、生物医药、房地产</td><td>高新技术产业、生物医药产业、房地产及其他产业。</td></tr><tr><th>8</th><td>9</td><td>10</td><td>美丽生态</td><td>深圳美丽生态股份有限公司</td><td>广东</td><td>深圳市</td><td>7026.79万</td><td>-1174.96万</td><td>278</td><td>1995-10-27</td><td>--</td><td>NaN</td><td>园林工程</td><td>燃气销售服务、园林建设、园林设计、苗木销售</td><td>工程施工、园林绿化及环境综合整治。</td></tr><tr><th>9</th><td>10</td><td>11</td><td>深物业A</td><td>深圳市物业发展(集团)股份有限公司</td><td>广东</td><td>深圳市</td><td>8.62亿</td><td>1.28亿</td><td>8035</td><td>1992-03-30</td><td>--</td><td>NaN</td><td>房地产开发</td><td>产城空间开发、物业管理服务、产业生态运营、餐饮业务、工程监理业务</td><td>从事房地产开发经营，兼营物业管理、房屋租赁、出租车客运、餐饮服务等。</td></tr><tr><th>10</th><td>11</td><td>12</td><td>南玻A</td><td>中国南玻集团股份有限公司</td><td>广东</td><td>深圳市</td><td>17.34亿</td><td>1.12亿</td><td>10558</td><td>1992-02-28</td><td>--</td><td>NaN</td><td>玻璃</td><td>玻璃业务、电子玻璃及显示器件业务、太阳能及其他业务</td><td>研发、生产制造和销售优质浮法玻璃和工程玻璃、太阳能玻璃和硅材料、光伏电池和组件等可再生能源产...</td></tr><tr><th>11</th><td>12</td><td>14</td><td>沙河股份</td><td>沙河实业股份有限公司</td><td>广东</td><td>深圳市</td><td>8687.30万</td><td>983.82万</td><td>153</td><td>1992-06-02</td><td>--</td><td>NaN</td><td>房地产开发</td><td>房地产销售</td><td>从事房地产开发与经营、现代服务型产业用房运营与管理。</td></tr><tr><th>12</th><td>13</td><td>16</td><td>深康佳A</td><td>康佳集团股份有限公司</td><td>广东</td><td>深圳市</td><td>78.07亿</td><td>-2.74亿</td><td>17216</td><td>1992-03-27</td><td>--</td><td>NaN</td><td>电视机</td><td>工贸业务、彩电业务、环保业务、白电业务、半导体业务</td><td>消费类电子业务、工贸业务、环保业务、半导体业务。</td></tr><tr><th>13</th><td>14</td><td>17</td><td>深中华A</td><td>深圳中华自行车(集团)股份有限公司</td><td>广东</td><td>深圳市</td><td>743.44万</td><td>-73.30万</td><td>65</td><td>1992-03-31</td><td>--</td><td>NaN</td><td>自行车</td><td>自行车及零配件销售、锂电池材料、珠宝黄金</td><td>自行车及锂电池材料业务、珠宝黄金业务。</td></tr><tr><th>14</th><td>15</td><td>19</td><td>深粮控股</td><td>深圳市深粮控股股份有限公司</td><td>广东</td><td>深圳市</td><td>16.94亿</td><td>8628.35万</td><td>1246</td><td>1992-10-12</td><td>--</td><td>NaN</td><td>软饮料</td><td>食品和饮料及茶加工、粮油贸易及加工、粮油仓储物流及服务</td><td>批发零售业务、食品加工制造业务、租赁及商务服务业务。</td></tr><tr><th>15</th><td>16</td><td>20</td><td>深华发A</td><td>深圳中恒华发股份有限公司</td><td>广东</td><td>深圳市</td><td>8780.06万</td><td>-40.07万</td><td>1132</td><td>1992-04-28</td><td>--</td><td>NaN</td><td>电子零部件</td><td>显示器、注塑件、EPS产品、物业租赁、废料收入、水电费及其他</td><td>精密注塑件的加工、销售;液晶显示器的加工、销售;轻型包装材料的加工、销售以及物业租赁业务。</td></tr><tr><th>16</th><td>17</td><td>21</td><td>深科技</td><td>深圳长城开发科技股份有限公司</td><td>广东</td><td>深圳市</td><td>33.23亿</td><td>1.04亿</td><td>27051</td><td>1994-02-02</td><td>--</td><td>NaN</td><td>PC、服务器及硬件</td><td>存储半导体业务、自有产品、高端制造</td><td>致力于为全球客户提供技术研发、工艺设计、生产加工、采购管理、物流支持等电子产品制造服务。</td></tr><tr><th>17</th><td>18</td><td>23</td><td>深天地A</td><td>深圳市天地(集团)股份有限公司</td><td>广东</td><td>深圳市</td><td>1.67亿</td><td>-1308.50万</td><td>984</td><td>1993-04-29</td><td>--</td><td>NaN</td><td>商品混凝土</td><td>房地产、工业、租赁</td><td>商品混凝土的生产和销售、房地产的开发及物业管理等。</td></tr><tr><th>18</th><td>19</td><td>25</td><td>特力A</td><td>深圳市特力(集团)股份有限公司</td><td>广东</td><td>深圳市</td><td>8552.04万</td><td>496.65万</td><td>302</td><td>1993-06-21</td><td>--</td><td>NaN</td><td>汽车销售</td><td>汽车销售、汽车维修及检测、珠宝批发及零售、物业租赁及服务</td><td>汽车销售、汽车检测、维修及配件销售；资源性资产管理；珠宝服务业务。</td></tr><tr><th>19</th><td>20</td><td>26</td><td>飞亚达</td><td>飞亚达精密科技股份有限公司</td><td>广东</td><td>深圳市</td><td>5.88亿</td><td>-1297.48万</td><td>4901</td><td>1993-06-03</td><td>--</td><td>NaN</td><td>珠宝首饰</td><td>手表品牌业务、手表零售服务业务、精密科技业务、租赁业务</td><td>主要从事钟表及其零配件的设计、开发、制造、销售和维修业务，包括"飞亚达"表的产品经营和世界名...</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stock1.to_csv(<span class="string">&#x27;A股信息1.csv&#x27;</span>,index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">#保存第1页A股信息</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stock = get_stock(<span class="number">1</span>)    <span class="comment">#获取第1页数据</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">5</span>):   <span class="comment">#获取2到5页数据,共有202页数据，全部爬取需长时间</span></span><br><span class="line">    stock = pd.concat([stock,get_stock(i)])   <span class="comment">#拼接表格数据</span></span><br><span class="line">stock</span><br></pre></td></tr></table></figure><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>序号</th><th>股票代码</th><th>股票简称</th><th>公司名称</th><th>省份</th><th>城市</th><th>主营业务收入(202003)</th><th>净利润(202003)</th><th>员工人数</th><th>上市日期</th><th>招股书</th><th>公司财报</th><th>行业分类</th><th>产品类型</th><th>主营业务</th></tr></thead><tbody><tr><th>0</th><td>1</td><td>1</td><td>平安银行</td><td>平安银行股份有限公司</td><td>广东</td><td>深圳市</td><td>379.26亿</td><td>85.48亿</td><td>36676</td><td>1991-04-03</td><td>--</td><td>NaN</td><td>银行</td><td>商业银行业务</td><td>经有关监管机构批准的各项商业银行业务。</td></tr><tr><th>1</th><td>2</td><td>2</td><td>万科A</td><td>万科企业股份有限公司</td><td>广东</td><td>深圳市</td><td>477.74亿</td><td>24.30亿</td><td>140565</td><td>1991-01-29</td><td>--</td><td>NaN</td><td>房地产开发</td><td>房地产、物业管理、投资咨询</td><td>房地产开发和物业服务。</td></tr><tr><th>2</th><td>3</td><td>4</td><td>国华网安</td><td>深圳国华网安科技股份有限公司</td><td>广东</td><td>深圳市</td><td>2325.30万</td><td>357.53万</td><td>264</td><td>1991-01-14</td><td>--</td><td>NaN</td><td>生物医药</td><td>移动应用安全服务、移动互联网游戏</td><td>移动应用安全服务业务。</td></tr><tr><th>3</th><td>4</td><td>5</td><td>ST星源</td><td>深圳世纪星源股份有限公司</td><td>广东</td><td>深圳市</td><td>4570.29万</td><td>-2235.80万</td><td>629</td><td>1990-12-10</td><td>--</td><td>NaN</td><td>环保工程、物业管理</td><td>酒店经营、物业管理、环保业务</td><td>绿色低碳城市社区建设相关的服务业务。</td></tr><tr><th>4</th><td>5</td><td>6</td><td>深振业A</td><td>深圳市振业(集团)股份有限公司</td><td>广东</td><td>深圳市</td><td>6.52亿</td><td>1.41亿</td><td>397</td><td>1992-04-27</td><td>--</td><td>NaN</td><td>房地产开发</td><td>房地产</td><td>从事房地产开发与销售。</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>15</th><td>76</td><td>404</td><td>长虹华意</td><td>长虹华意压缩机股份有限公司</td><td>江西</td><td>景德镇市</td><td>20.96亿</td><td>2571.95万</td><td>7788</td><td>1996-06-19</td><td>--</td><td>NaN</td><td>压缩机</td><td>压缩机 、原材料及配件、智能扫地机 、电池</td><td>冰箱压缩机、商用压缩机的研发、生产和销售。</td></tr><tr><th>16</th><td>77</td><td>407</td><td>胜利股份</td><td>山东胜利股份有限公司</td><td>山东</td><td>济南市</td><td>8.63亿</td><td>2883.14万</td><td>2071</td><td>1996-07-03</td><td>--</td><td>NaN</td><td>燃气</td><td>天然气终端销售、天然气贸易、管道制造、油品贸易</td><td>清洁能源天然气业务推广和应用。</td></tr><tr><th>17</th><td>78</td><td>408</td><td>藏格控股</td><td>藏格控股股份有限公司</td><td>青海</td><td>海西蒙古族藏族自治州</td><td>2.72亿</td><td>-2.69亿</td><td>1603</td><td>1996-06-28</td><td>--</td><td>NaN</td><td>钾肥</td><td>生产农用复合肥料、贸易业务</td><td>钾肥(氯化钾)的生产和销售。</td></tr><tr><th>18</th><td>79</td><td>409</td><td>云鼎科技</td><td>云鼎科技股份有限公司</td><td>山东</td><td>济南市</td><td>6.03亿</td><td>-1501.08万</td><td>381</td><td>1996-06-27</td><td>--</td><td>NaN</td><td>综合</td><td>黄金、生物制药、特种轮胎、专利技术实施、中药材加工零售、商业贸易</td><td>信息化技术服务和煤气化技术推广业务。</td></tr><tr><th>19</th><td>80</td><td>410</td><td>ST沈机</td><td>沈阳机床股份有限公司</td><td>辽宁</td><td>沈阳市</td><td>2.06亿</td><td>-2.28亿</td><td>4597</td><td>1996-07-18</td><td>--</td><td>NaN</td><td>机床设备</td><td>机床、机床配套</td><td>产品研发、机床制造、销售服务、行业解决方案、机床零部件配套等。</td></tr></tbody></table><p>80 rows × 15 columns</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#stock.to_csv(&#x27;上市公司信息.csv&#x27;, index=False, encoding=&#x27;utf-8&#x27;)</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:2514154656@qq.com" rel="external nofollow noreferrer">Kit</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://zhangkh.top/f49b880f.html">https://zhangkh.top/f49b880f.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zhangkh.top" target="_blank">爱爬虫与大数据 | 张凯恒的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E3%80%8A%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E3%80%8B%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8EPython%E7%9A%84%E5%BA%94%E7%94%A8/">《数据可视化》——基于Python的应用</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/image/weixin_gzh.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/image/weixin_gzh.jpg" alt="微信公众号"></a><div class="post-qr-code-desc">微信公众号</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/aa19c552.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112101441556.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Python数据挖掘方法与应用</div></div></a></div><div class="next-post pull-right"><a href="/ff635cd4.html"><img class="next-cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071617263.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">第9章-数据的决策分析</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/799f587.html" title="第1章-数据分析软件简介"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112061836351.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-06</div><div class="title">第1章-数据分析软件简介</div></div></a></div><div><a href="/2004cd38.html" title="第2章-数据的收集与整理第3章-Python编程基础"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112070132206.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-07</div><div class="title">第2章-数据的收集与整理第3章-Python编程基础</div></div></a></div><div><a href="/ff915ea5.html" title="第4章-数据的探索性分析"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112070137956.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-07</div><div class="title">第4章-数据的探索性分析</div></div></a></div><div><a href="/14df227a.html" title="第6章-数据的统计分析"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112070151645.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-07</div><div class="title">第6章-数据的统计分析</div></div></a></div><div><a href="/36060a3b.html" title="第7章-数据的模型分析"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071608756.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-07</div><div class="title">第7章-数据的模型分析</div></div></a></div><div><a href="/36b38058.html" title="第5章-数据的直观分析"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112070146440.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-07</div><div class="title">第5章-数据的直观分析</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/image/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Kit</div><div class="author-info__description">石大CIT金融学子一枚，兴趣之余学了点前端、Python、爬虫、数据处理、数学建模Matlab、数据库、量化金融等；啥都感兴趣啥都会一点〒▽〒就是不精通；愿不断学习共同进步！(￣︶￣)↗[GO!]</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">53</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://zhangkaiheng.gitee.io/"><i class="fa fa-bookmark"></i><span>加入书签！收藏！永不迷路！</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Kit139" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://gitee.com/zhangkaiheng" rel="external nofollow noreferrer" target="_blank" title="Gitee"><i class="iconfont icon-gitee-fill-round"></i></a><a class="social-icon" href="https://space.bilibili.com/475898359" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="iconfont icon-bilibili-fill"></i></a><a class="social-icon" href="mailto:2514154656@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">张凯恒的个人博客——现已建立博客-云盘资源分享-公众号系统一体化</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC10%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%9C%A8%E7%BA%BF%E5%88%86%E6%9E%90%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-text">第10章 数据在线分析及可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-Tushare%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90"><span class="toc-text">10.1 Tushare数据的可视化分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-1-%E8%82%A1%E5%B8%82%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.1.1 股市基本数据的获取与分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-2-%E8%AF%81%E5%88%B8%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.1.2 证券交易数据的获取与分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-3-Tushare%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BF%9D%E5%AD%98%E5%8F%8A%E6%89%A9%E5%B1%95"><span class="toc-text">10.1.3 Tushare数据的保存及扩展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E6%96%B0%E6%B5%AA%E8%B4%A2%E7%BB%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.2 新浪财经数据的获取与分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-1-%E5%9B%BD%E5%86%85%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC%E7%9A%84%E5%A4%8D%E5%88%B6%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.2.1 国内生产总值的复制与分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-2-%E6%9D%BF%E5%9D%97%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8A%93%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.2.2 板块行情数据的抓取与分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E4%B8%AD%E5%95%86%E6%83%85%E6%8A%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90"><span class="toc-text">10.3 中商情报数据的可视化分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-1-%E5%AE%8F%E8%A7%82%E7%BB%8F%E6%B5%8E%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.3.1 宏观经济数据爬取与分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-2-A%E8%82%A1%E8%82%A1%E7%A5%A8%E4%BF%A1%E6%81%AF%E7%9A%84%E7%88%AC%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-text">10.3.2 A股股票信息的爬取与分析</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/c6fb4f64.html" title="Anaconda+VScode简便舒适轻量级Python环境搭建"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202201011301879.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Anaconda+VScode简便舒适轻量级Python环境搭建"></a><div class="content"><a class="title" href="/c6fb4f64.html" title="Anaconda+VScode简便舒适轻量级Python环境搭建">Anaconda+VScode简便舒适轻量级Python环境搭建</a><time datetime="2022-01-01T04:35:19.000Z" title="发表于 2022-01-01 12:35:19">2022-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/aa19c552.html" title="Python数据挖掘方法与应用"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112101441556.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Python数据挖掘方法与应用"></a><div class="content"><a class="title" href="/aa19c552.html" title="Python数据挖掘方法与应用">Python数据挖掘方法与应用</a><time datetime="2021-12-10T06:39:34.000Z" title="发表于 2021-12-10 14:39:34">2021-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/f49b880f.html" title="第10章-数据的在线分析"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="第10章-数据的在线分析"></a><div class="content"><a class="title" href="/f49b880f.html" title="第10章-数据的在线分析">第10章-数据的在线分析</a><time datetime="2021-12-07T08:20:11.000Z" title="发表于 2021-12-07 16:20:11">2021-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/ff635cd4.html" title="第9章-数据的决策分析"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071617263.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="第9章-数据的决策分析"></a><div class="content"><a class="title" href="/ff635cd4.html" title="第9章-数据的决策分析">第9章-数据的决策分析</a><time datetime="2021-12-07T08:16:32.000Z" title="发表于 2021-12-07 16:16:32">2021-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/1f321105.html" title="第8章-数据的预测分析"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://gitee.com/cit_k/pictures/raw/master/picture/202112071611683.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="第8章-数据的预测分析"></a><div class="content"><a class="title" href="/1f321105.html" title="第8章-数据的预测分析">第8章-数据的预测分析</a><time datetime="2021-12-07T08:10:54.000Z" title="发表于 2021-12-07 16:10:54">2021-12-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://gitee.com/cit_k/pictures/raw/master/picture/202112071620737.png)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Kit</div><div class="footer_custom_text">Hi, welcome to my personal blog —— <a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhangkaiheng.gitee.io/">LoveSpider</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine(){function e(){new Valine(Object.assign({el:"#vcomment",appId:"qz3wb0JS4Pd6cW1H8s96lQ0n-gzGzoHsz",appKey:"CbraUUy5NOeQ3Be7fekLXRqy",placeholder:"记得留下你的昵称和邮箱....可以快速收到回复",avatar:"monsterid",meta:"nick,mail,link".split(","),pageSize:"10",lang:"zh_CN",recordIP:!1,serverURLs:"",emojiCDN:"",emojiMaps:"",enableQQ:!1,path:window.location.pathname,requiredFields:["nick,mail"],visitor:!1},null))}"function"==typeof Valine?e():getScript("https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js").then(e)}{function loadOtherComment(){loadValine()}btf.loadComment(document.getElementById("vcomment"),loadValine)}</script></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>✨ 网站已更新最新版本 👉</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">点击刷新</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async mobile="false"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>